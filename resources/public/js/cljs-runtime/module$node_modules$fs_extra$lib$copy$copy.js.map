{
"version":3,
"file":"module$node_modules$fs_extra$lib$copy$copy.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/fs-extra/lib/copy/copy.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$fs_extra$lib$copy$copy\"] = function(global,require,module,exports) {\nvar process = require('process');\n'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirs = require('../mkdirs').mkdirs\nconst pathExists = require('../path-exists').pathExists\nconst utimesMillis = require('../util/utimes').utimesMillis\nconst stat = require('../util/stat')\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0001'\n    )\n  }\n\n  stat.checkPaths(src, dest, 'copy', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      runFilter(src, dest, opts, (err, include) => {\n        if (err) return cb(err)\n        if (!include) return cb()\n\n        checkParentDir(destStat, src, dest, opts, cb)\n      })\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return getStats(destStat, src, dest, opts, cb)\n    mkdirs(destParent, err => {\n      if (err) return cb(err)\n      return getStats(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction runFilter (src, dest, opts, cb) {\n  if (!opts.filter) return cb(null, true)\n  Promise.resolve(opts.filter(src, dest))\n    .then(include => cb(null, include), error => cb(error))\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n    else if (srcStat.isSocket()) return cb(new Error(`Cannot copy a socket file: ${src}`))\n    else if (srcStat.isFIFO()) return cb(new Error(`Cannot copy a FIFO pipe: ${src}`))\n    return cb(new Error(`Unknown file: ${src}`))\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  fs.copyFile(src, dest, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) return handleTimestampsAndMode(srcStat.mode, src, dest, cb)\n    return setDestMode(dest, srcStat.mode, cb)\n  })\n}\n\nfunction handleTimestampsAndMode (srcMode, src, dest, cb) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) {\n    return makeFileWritable(dest, srcMode, err => {\n      if (err) return cb(err)\n      return setDestTimestampsAndMode(srcMode, src, dest, cb)\n    })\n  }\n  return setDestTimestampsAndMode(srcMode, src, dest, cb)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode, cb) {\n  return setDestMode(dest, srcMode | 0o200, cb)\n}\n\nfunction setDestTimestampsAndMode (srcMode, src, dest, cb) {\n  setDestTimestamps(src, dest, err => {\n    if (err) return cb(err)\n    return setDestMode(dest, srcMode, cb)\n  })\n}\n\nfunction setDestMode (dest, srcMode, cb) {\n  return fs.chmod(dest, srcMode, cb)\n}\n\nfunction setDestTimestamps (src, dest, cb) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  fs.stat(src, (err, updatedSrcStat) => {\n    if (err) return cb(err)\n    return utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime, cb)\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts, cb)\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return setDestMode(dest, srcMode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  runFilter(srcItem, destItem, opts, (err, include) => {\n    if (err) return cb(err)\n    if (!include) return copyDirItems(items, src, dest, opts, cb)\n\n    stat.checkPaths(srcItem, destItem, 'copy', opts, (err, stats) => {\n      if (err) return cb(err)\n      const { destStat } = stats\n      getStats(destStat, srcItem, destItem, opts, err => {\n        if (err) return cb(err)\n        return copyDirItems(items, src, dest, opts, cb)\n      })\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n\n};"],
"names":["shadow$provide","global","require","module","exports","checkParentDir","destStat","src","dest","opts","cb","destParent","path","dirname","pathExists","err","dirExists","getStats","mkdirs","runFilter","filter","Promise","resolve","then","include","error","dereference","stat","fs","lstat","srcStat","isDirectory","copyDir","mkDirAndCopy","mode","isFile","isCharacterDevice","isBlockDevice","mayCopyFile","copyFile","isSymbolicLink","onLink","isSocket","Error","isFIFO","overwrite","unlink","errorOnExist","preserveTimestamps","handleTimestampsAndMode","chmod","srcMode","makeFileWritable","setDestTimestampsAndMode","setDestTimestamps","updatedSrcStat","utimesMillis","atime","mtime","mkdir","readdir","items","copyDirItems","item","pop","copyDirItem","srcItem","join","destItem","checkPaths","stats","readlink","resolvedSrc","process","cwd","resolvedDest","code","symlink","isSrcSubdir","copyLink","copy","clobber","arch","emitWarning","checkParentPaths"]
}
