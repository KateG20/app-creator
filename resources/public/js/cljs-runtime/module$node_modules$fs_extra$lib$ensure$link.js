shadow$provide.module$node_modules$fs_extra$lib$ensure$link=function(global,require,module,exports){global=require("module$node_modules$universalify$index").fromCallback;const path=require("module$node_modules$path_browserify$index"),fs=require("module$node_modules$graceful_fs$graceful_fs"),mkdir=require("module$node_modules$fs_extra$lib$mkdirs$index"),pathExists=require("module$node_modules$fs_extra$lib$path_exists$index").pathExists,{areIdentical}=require("module$node_modules$fs_extra$lib$util$stat");
module.exports={createLink:global(function(srcpath,dstpath,callback){function makeLink(srcpath,dstpath){fs.link(srcpath,dstpath,err=>{if(err)return callback(err);callback(null)})}fs.lstat(dstpath,(_,dstStat)=>{fs.lstat(srcpath,(err$jscomp$1,srcStat)=>{if(err$jscomp$1)return err$jscomp$1.message=err$jscomp$1.message.replace("lstat","ensureLink"),callback(err$jscomp$1);if(dstStat&&areIdentical(srcStat,dstStat))return callback(null);const dir=path.dirname(dstpath);pathExists(dir,(err$jscomp$0,dirExists)=>
{if(err$jscomp$0)return callback(err$jscomp$0);if(dirExists)return makeLink(srcpath,dstpath);mkdir.mkdirs(dir,err=>{if(err)return callback(err);makeLink(srcpath,dstpath)})})})})}),createLinkSync:function(srcpath,dstpath){try{var dstStat=fs.lstatSync(dstpath)}catch{}try{const srcStat=fs.lstatSync(srcpath);if(dstStat&&areIdentical(srcStat,dstStat))return}catch(err){throw err.message=err.message.replace("lstat","ensureLink"),err;}dstStat=path.dirname(dstpath);if(fs.existsSync(dstStat))return fs.linkSync(srcpath,
dstpath);mkdir.mkdirsSync(dstStat);return fs.linkSync(srcpath,dstpath)}}}
//# sourceMappingURL=module$node_modules$fs_extra$lib$ensure$link.js.map
